####################
First Installation

Virtualenv is providing a stable environment for Django. (1)

Assuming Python 2.5+ is already installed it should be enough to follow these 
steps (some commands are specific to Ubuntu with Bash):

1. Clone FlightDeck from github
   $ cd /path/to/projects/
   $ git clone git@github.com:zalun/FlightDeck.git

2. Install python-setuptools python-dev build-essential
   $ sudo apt-get install python-setuptools python-dev build-essential

3. Install Pip and VirtualEnv
   $ sudo easy_install -U pip
   $ sudo pip install -U virtualenv

4. Create directory for Python environments
   $ sudo mkdir /srv; sudo mkdir /srv/python-environments
   $ cd /srv/python-environments
   $ sudo virtualenv --no-site-packages flightdeck

5. Clear PYTHONPATH (could be optional, but it's working for me)
   $ export PYTHONPATH=

6. Install from requirements.txt (tested on EEE PC running Ubuntu)
   $ sudo pip install -E flightdeck/ -r /path/to/projects/FlightDeck/tools/pip-requirements.txt

7. Check if everything is working
   * activate flightdeck environment
     $ source flightdeck/bin/activate
     the PS1 may change (regarding on the settings) to
     (flightdeck)zalun@localhost $
   * display the Django version
     $ django-admin.py --version
     1.1.1 
   * check if the same as in requirements file 
     $ grep Django /path/to/projects/FlightDeck/tools/pip-requirements.txt
     Django==1.1.1
   * display list of packages
     $ yolk -l
     Django          - 1.1.1        - active 
     Python          - 2.6.4        - active development (/usr/lib/python2.6/lib-dynload)
     pip             - 0.6.2        - active 
     setuptools      - 0.6c11       - active 
     wsgiref         - 0.1.2        - active development (/usr/lib/python2.6)
     yolk            - 0.4.1        - active 
   * Check if contains everything from requirements file in the right version plus 
     Python, pip and setuptools
     $ cat /path/to/projects/FlightDeck/tools/pip-requirements.txt
     Django==1.1.1
     wsgiref==0.1.2
     yolk==0.4.1

8. Configure the Django application
   $ cd /path/to/projects/FlightDeck
   $ ./scripts/install.sh
   $ vi flightdeck/settings_local.py # **

9. Initiate database*
   $ ./scripts/syncdb.sh
   
9. Run Server*
   $ ./scripts/runserver.sh
   FlightDeck may be accessed by loading http://127.0.0.1:8090/


##############################
Extending the Python codebase

1. Install the package
   $ cd /srv/python-environments
   $ pip install -E flightdeck/ pil

2. Save the requirements
   $ pip freeze -E flightdeck/ > /path/to/projects/FlightDeck/tools/pip-requirements.txt


##############################
Adding third party projects
DOC: http://pip.openplans.org/requirement-format.html


#####################
Updating requirements

1. Clear PYTHONPATH (could be optional, but it's working for me)
   $ export PYTHONPATH=

2. Install from pip-requirements.txt
   $ cd /srv/python-environments
   $ sudo pip install -E flightdeck/ -r /path/to/projects/FlightDeck/tools/pip-requirements.txt


----
*   Scripts assume one has installed the FlightDeck environment in 
    /srv/python-envirenments/flightdeck/ if it is a different one
    please edit the scripts/config_local.sh

**  No *_local.py file should be shared between users, they contain
    informations relevant only to the local installation of FlightDeck.
    The exclude file is provided by default.

----
(1) Installation of VirtualEnv under Ubuntu is described in detail in this post: 
    http://www.saltycrane.com/blog/2009/05/notes-using-pip-and-virtualenv-django/

(2) Pip requirements file format
    http://pip.openplans.org/requirement-format.html
